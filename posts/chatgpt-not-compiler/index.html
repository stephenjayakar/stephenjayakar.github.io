<!doctype html><html lang=en data-theme=dark><head><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"]]}}</script></head><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload as=font type=font/woff2 href=/fonts/roboto-slab-latin-400.woff2 crossorigin=anonymous><link rel=preload as=font type=font/woff2 href=/fonts/roboto-slab-latin-700.woff2 crossorigin=anonymous><link rel=preload as=font type=font/woff2 href=/fonts/fira-code-latin-300.woff2 crossorigin=anonymous><link rel=preload as=font type=font/woff2 href=/fonts/fira-code-latin-400.woff2 crossorigin=anonymous><link rel=preload as=font type=font/woff2 href=/fonts/fira-code-latin-700.woff2 crossorigin=anonymous><meta name=robots content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>ChatGPT isn't a decompiler... yet</title>
<meta name=description content="Previous article: What I&rsquo;m up to
Abstract / Results# It feels a bit pretentious to open a blog post with an abstract. However, I wanted to communicate up front concisely what I tried to do, and what the open areas of exploration are. Those who are interested can dig more.
I wanted to make ChatGPT into a magic decompiler for PowerPC assembly to supercharge the Super Smash Bros. Melee (&ldquo;Melee&rdquo;) decompilation project. I observed over a year ago that ChatGPT was surprisingly good at understanding PowerPC assembly language and generating C code that was logically equivalent. I also saw other papers that were attempting to use LLMs as decompilers.
"><link rel=canonical href=https://stephenjayakar.github.io/posts/chatgpt-not-compiler/><meta name=twitter:card content="summary"><meta name=twitter:title content="ChatGPT isn't a decompiler... yet"><meta name=twitter:description content="Previous article: What I’m up to
Abstract / Results# It feels a bit pretentious to open a blog post with an abstract. However, I wanted to communicate up front concisely what I tried to do, and what the open areas of exploration are. Those who are interested can dig more.
I wanted to make ChatGPT into a magic decompiler for PowerPC assembly to supercharge the Super Smash Bros. Melee (“Melee”) decompilation project. I observed over a year ago that ChatGPT was surprisingly good at understanding PowerPC assembly language and generating C code that was logically equivalent. I also saw other papers that were attempting to use LLMs as decompilers."><meta property="og:url" content="https://stephenjayakar.github.io/posts/chatgpt-not-compiler/"><meta property="og:site_name" content="Hi, I'm Stephen 👋"><meta property="og:title" content="ChatGPT isn't a decompiler... yet"><meta property="og:description" content="Previous article: What I’m up to
Abstract / Results# It feels a bit pretentious to open a blog post with an abstract. However, I wanted to communicate up front concisely what I tried to do, and what the open areas of exploration are. Those who are interested can dig more.
I wanted to make ChatGPT into a magic decompiler for PowerPC assembly to supercharge the Super Smash Bros. Melee (“Melee”) decompilation project. I observed over a year ago that ChatGPT was surprisingly good at understanding PowerPC assembly language and generating C code that was logically equivalent. I also saw other papers that were attempting to use LLMs as decompilers."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-10T00:00:06-08:00"><meta property="article:modified_time" content="2024-12-10T00:00:06-08:00"><meta property="article:tag" content="Tech"><meta itemprop=name content="ChatGPT isn't a decompiler... yet"><meta itemprop=description content="Previous article: What I’m up to
Abstract / Results# It feels a bit pretentious to open a blog post with an abstract. However, I wanted to communicate up front concisely what I tried to do, and what the open areas of exploration are. Those who are interested can dig more.
I wanted to make ChatGPT into a magic decompiler for PowerPC assembly to supercharge the Super Smash Bros. Melee (“Melee”) decompilation project. I observed over a year ago that ChatGPT was surprisingly good at understanding PowerPC assembly language and generating C code that was logically equivalent. I also saw other papers that were attempting to use LLMs as decompilers."><meta itemprop=datePublished content="2024-12-10T00:00:06-08:00"><meta itemprop=dateModified content="2024-12-10T00:00:06-08:00"><meta itemprop=wordCount content="4200"><meta itemprop=keywords content="Tech"><script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZX8HCDX04"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0ZX8HCDX04")</script><style>@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:100;src:local("Roboto Slab Thin "),local("Roboto Slab-Thin"),url(/fonts/roboto-slab-latin-100.woff2) format("woff2"),url(/fonts/roboto-slab-latin-100.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:200;src:local("Roboto Slab Extra Light "),local("Roboto Slab-Extra Light"),url(/fonts/roboto-slab-latin-200.woff2) format("woff2"),url(/fonts/roboto-slab-latin-200.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:300;src:local("Roboto Slab Light "),local("Roboto Slab-Light"),url(/fonts/roboto-slab-latin-300.woff2) format("woff2"),url(/fonts/roboto-slab-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:400;src:local("Roboto Slab Regular "),local("Roboto Slab-Regular"),url(/fonts/roboto-slab-latin-400.woff2) format("woff2"),url(/fonts/roboto-slab-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:500;src:local("Roboto Slab Medium "),local("Roboto Slab-Medium"),url(/fonts/roboto-slab-latin-500.woff2) format("woff2"),url(/fonts/roboto-slab-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:600;src:local("Roboto Slab SemiBold "),local("Roboto Slab-SemiBold"),url(/fonts/roboto-slab-latin-600.woff2) format("woff2"),url(/fonts/roboto-slab-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:700;src:local("Roboto Slab Bold "),local("Roboto Slab-Bold"),url(/fonts/roboto-slab-latin-700.woff2) format("woff2"),url(/fonts/roboto-slab-latin-700.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:800;src:local("Roboto Slab ExtraBold "),local("Roboto Slab-ExtraBold"),url(/fonts/roboto-slab-latin-800.woff2) format("woff2"),url(/fonts/roboto-slab-latin-800.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:900;src:local("Roboto Slab Black "),local("Roboto Slab-Black"),url(/fonts/roboto-slab-latin-900.woff2) format("woff2"),url(/fonts/roboto-slab-latin-900.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:300;src:local("Fira Code Light "),local("Fira Code-Light"),url(/fonts/fira-code-latin-300.woff2) format("woff2"),url(/fonts/fira-code-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:400;src:local("Fira Code Regular "),local("Fira Code-Regular"),url(/fonts/fira-code-latin-400.woff2) format("woff2"),url(/fonts/fira-code-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:500;src:local("Fira Code Medium "),local("Fira Code-Medium"),url(/fonts/fira-code-latin-500.woff2) format("woff2"),url(/fonts/fira-code-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:600;src:local("Fira Code SemiBold "),local("Fira Code-SemiBold"),url(/fonts/fira-code-latin-600.woff2) format("woff2"),url(/fonts/fira-code-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:700;src:local("Fira Code Bold "),local("Fira Code-Bold"),url(/fonts/fira-code-latin-700.woff2) format("woff2"),url(/fonts/fira-code-latin-700.woff) format("woff")}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}

/*! CC BY-SA 3.0 License | https://stackoverflow.com/a/36118384/1154965 */@keyframes blink{50%{opacity:0}to{opacity:1}}

/*! MIT License | github.com/schnerring/hugo-theme-gruvbox */:root[data-theme=light]{--bg:var(--bg0_h);--bg0:#fbf1c7;--bg0_h:#f9f5d7;--bg0_s:#f2e5bc;--bg1:#ebdbb2;--bg2:#d5c4a1;--bg3:#bdae93;--bg4:#a89984;--fg:var(--fg1);--fg0:#282828;--fg1:#3c3836;--fg2:#504945;--fg3:#665c54;--fg4:#7c6f64;--gray1:var(--fg4);--gray2:#928374;--red1:#cc241d;--red2:#9d0006;--green1:#98971a;--green2:#797403;--yellow1:#d79921;--yellow2:#b57614;--blue1:#458588;--blue2:#076678;--purple1:#b16286;--purple2:#8f3f71;--aqua1:#689d6a;--aqua2:#427b58;--orange1:#d65d0e;--orange2:#af3a03}[data-theme=light]:root .light--hidden{display:none}:root[data-theme=dark]{--bg:var(--bg0_h);--bg0:#282828;--bg0_h:#1d2021;--bg0_s:#32302f;--bg1:#3c3836;--bg2:#504945;--bg3:#665c54;--bg4:#7c6f64;--fg:var(--fg1);--fg0:#fbf1c7;--fg1:#ebdbb2;--fg2:#d5c4a1;--fg3:#bdae93;--fg4:#a89984;--gray1:var(--fg4);--gray2:#928374;--red1:#cc241d;--red2:#fb4934;--green1:#98971a;--green2:#b8bb26;--yellow1:#d79921;--yellow2:#fabd2f;--blue1:#458588;--blue2:#83a598;--purple1:#b16286;--purple2:#d3869b;--aqua1:#689d6a;--aqua2:#8ec07c;--orange1:#d65d0e;--orange2:#fe8019}[data-theme=dark]:root .dark--hidden{display:none}:root{--primary:var(--orange1);--primary-alt:var(--orange2);--font-monospace:"Fira Code","Lucida Console",Monaco,monospace;--font-sans-serif:Verdana,Helvetica,sans-serif;--font-serif:"Roboto Slab",Georgia,serif}html{font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);font-size:1rem;scroll-behavior:smooth}body{background:var(--bg);color:var(--fg);line-height:1.675;word-wrap:break-word}strong{letter-spacing:.35px}a{color:inherit;-webkit-text-decoration:none;text-decoration:none}a.link--external:after{content:"\2009↗"}img{border:2px solid var(--bg1);height:auto;max-width:100%}figure{display:inline-block}figcaption{color:var(--fg3);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);font-size:.9rem}::-moz-selection{background:var(--bg4);color:var(--fg0)}::selection{background:var(--bg4);color:var(--fg0)}h1,h2,h3{color:var(--fg0);font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-weight:300;line-height:1.4}h1 code,h2 code,h3 code{font-size:1em}h2,h3{border-bottom:1px solid var(--bg1)}h1,h2{font-weight:400}h1{font-size:1.875rem}h2{font-size:1.75rem}h3{font-size:1.625rem}@media (min-width:768px){h1{font-size:2.375rem}h2{font-size:2rem}h3{font-size:1.75rem}}hr{background:var(--bg1);border:none;height:1px;margin:3rem auto;width:80%}blockquote,code,pre{border-radius:.2rem;padding:0 .2em}pre code{padding:0}blockquote,code,pre{background:var(--bg1)}code,pre{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}code code{background:var(--bg2)}blockquote,pre{padding:1rem}pre{background:var(--bg1)!important;overflow:auto}pre code{background:none}blockquote{border-left:5px solid var(--primary-alt);margin:.5rem 0}blockquote:not(.does-not-exist) code{background:var(--bg2)}blockquote:not(.does-not-exist) p:first-of-type{margin-top:0}blockquote:not(.does-not-exist) p:last-of-type{margin-bottom:0}pre::-webkit-scrollbar{height:.5rem;scrollbar-width:auto}pre::-webkit-scrollbar-track{background:var(--bg2);border-radius:.2rem}pre::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:.2rem}.layout{display:grid;grid-template-areas:"header" "main" "footer";grid-template-rows:auto 1fr auto;height:100vh}main{align-items:start;display:grid;grid-area:main;grid-template-areas:"empty content sidebar";grid-template-columns:1fr minmax(0,650px) 4fr}header{background:var(--bg1);grid-area:header}footer{grid-area:footer}footer,main{margin:.5em 1.1em}.content{grid-area:content}.sidebar{display:none;flex-direction:column;grid-area:sidebar;margin-top:3rem;position:sticky;top:2rem}@media (min-width:992px){.sidebar{display:flex}}header{display:grid;font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-size:1.125rem;grid-template-areas:"heading search nav theme-toggle";grid-template-columns:auto auto 1fr auto;padding:.75rem}.logo{color:var(--fg0);display:flex;font-weight:700;grid-area:heading}.logo:hover .logo__cursor{animation:blink 1s infinite;opacity:1}.logo__chevron,.logo__cursor{margin-left:.5rem}.logo__cursor{opacity:0}.logo__text{display:none}@media (min-width:768px){.logo__text{display:block}}.search{display:flex;grid-area:search;margin:0 1rem}#search__text{background:var(--bg2);border:1px solid var(--bg2);border-radius:.2rem;caret-color:var(--fg);color:var(--fg);outline:none;padding:0 .5rem;width:100%}#search__text:hover{border-color:var(--bg3)}#search__text:focus{border-color:var(--bg4)}#search__text::-moz-placeholder{color:var(--fg3)}#search__text::placeholder{color:var(--fg3)}#search__text[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;appearance:none}#search__suggestions{background:var(--bg);border-radius:.2rem;box-shadow:0 .5rem 1rem var(--bg1);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);left:0;margin-top:2rem;position:absolute;width:95vw;z-index:1000}@media (min-width:768px){.search{position:relative}#search__suggestions{width:60vw}}.search__suggestions--hidden{display:none}.search__suggestion-item{border-bottom:1px dashed var(--bg2);display:grid;grid-template-columns:1fr 2fr}.search__suggestion-item:focus,.search__suggestion-item:focus-visible,.search__suggestion-item:hover{background:var(--bg1);cursor:pointer;outline:none}.search__suggestion-item:last-child{border:none}.search__suggestion-description,.search__suggestion-title{margin:1rem 0;padding:0 1rem}.search__suggestion-title{font-weight:700}.search__suggestion-description{border-left:1px solid var(--bg2)}.search__no-results{padding:.75rem}.theme__toggle{align-items:center;background:none;border:none;color:var(--yellow1);cursor:pointer;display:flex;grid-area:theme-toggle;margin:0 1rem}.theme__toggle:hover{color:var(--yellow2)}.theme__toggle svg{height:28px;width:28px}nav#menu{align-items:center;display:flex;grid-area:nav;justify-content:flex-end}nav#menu .menu__item{color:var(--fg)}nav#menu .menu__item:hover{color:var(--fg3);cursor:pointer}nav#menu ul{list-style:none;margin:0;padding:0}nav#menu ul.menu--horizontal{align-items:center;display:none}nav#menu ul.menu--horizontal li{display:inline-block;margin:0 .75rem}@media (min-width:768px){nav#menu ul.menu--horizontal{display:flex}}nav#menu ul.menu--vertical{background:var(--fg0);bottom:0;margin:0;padding:3rem;position:fixed;right:0;top:0;transform:translate(100%);transition:transform .5s cubic-bezier(.9,0,.1,1);width:50%;z-index:10}nav#menu ul.menu--vertical .menu__item{color:var(--bg1)}nav#menu ul.menu--vertical .menu__item:hover{color:var(--bg4)}nav#menu .menu__burger{display:flex;height:24px;width:24px}nav#menu .menu__burger>*{position:absolute}nav#menu .menu__burger svg{height:inherit;width:inherit;z-index:20}nav#menu .menu__burger input{height:inherit;opacity:0;width:inherit;z-index:30}nav#menu .menu__burger input:checked~ul.menu--vertical{transform:none}nav#menu .menu__burger input:checked~svg{stroke:var(--bg1)}@media (min-width:768px){nav#menu .menu__burger{display:none}}.sidebar{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);margin-left:auto;margin-right:auto;max-width:350px;padding-left:2.5rem}.sidebar hr{margin:1.5rem auto}.sidebar svg{fill:var(--fg)}.jr-basics__image{background:var(--bg1);border:2px solid var(--bg2)}.jr-basics__summary{color:var(--fg3);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);margin:.75rem 0}.jr-basics__profile a:hover{color:var(--fg3)}.jr-basics__profile a:hover svg{fill:var(--fg3)}.tag-cloud{line-height:1.1;text-align:justify}.tag-cloud__tag:hover{color:var(--fg3)}.content-section,.post{border-bottom:2px dotted var(--bg1);padding:2rem 0}.post figure,.post img:not(figure img){box-sizing:border-box;margin:.5rem 0}.post-content__read-more,.post-header{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}.post-content{margin:1.3rem 0}.post-content__read-more{color:var(--primary-alt);margin-top:1.3rem}.post-content a,.post-header a{color:var(--primary-alt)}.post-content a:hover,.post-header a:hover{color:var(--primary)}.post-tags{align-items:center;display:flex;flex-wrap:wrap;gap:.9rem;margin:1rem 0}.post-tag{font-size:.9rem;line-height:1}.post-tag:before{content:"#"}.post-heading__anchor{display:none}h1:hover .post-heading__anchor,h2:hover .post-heading__anchor,h3:hover .post-heading__anchor{display:inline-block}.jr-basics__image,.jr-basics__item,.jr-basics__profile-icon,.jr-basics__profile-item{align-items:center;display:flex}.jr-basics__name{font-size:1.125rem;font-weight:700}.jr-basics__item{flex-direction:column;text-align:center}.jr-basics__item hr{margin:1.5rem auto}.jr-basics__image{border-radius:50%;height:250px;justify-content:center;overflow:hidden;width:250px}.jr-basics__label,.jr-basics__name,.jr-basics__summary{margin-top:.75rem}.jr-basics__profile svg{height:24px;width:24px}.jr-basics__profile,.jr-basics__profile-item{display:flex}.jr-basics__profile-item{display:flex;padding:.2rem}.jr-basics__profile--row{flex-wrap:wrap;justify-content:space-evenly}.jr-basics__profile-icon{padding:0 .75rem}</style><link rel=preload href="/css/non-critical.979fb31ac332b42b6b26763f7263e452271c9d83fa454c048b951eee7c8c74d628fcd72697b3ac484f455f71c091a1d2db913786fe6c795eafab76cd7cbaba99.css" as=style onload='this.onload=null,this.rel="stylesheet"' integrity="sha512-l5+zGsMytCtrJnY/cmPkUiccnYP6RUwEi5Ue7nyMdNYo/Ncml7OsSE9FX3HAkaHS25E3hv5seV6vq3bNfLq6mQ=="><link id=prism-dark rel=preload href=/prism-themes/prism-gruvbox-dark.min.54aecc64074623a4f9898544dcbdab9e804f1560ef0b38f4cf8e10fcaaf72264e798cb407c601aca6ecd833ec4eb93d66535581f18d45ba202cf848b70dbc332.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity="sha512-VK7MZAdGI6T5iYVE3L2rnoBPFWDvCzj0z44Q/Kr3ImTnmMtAfGAaym7Ngz7E65PWZTVYHxjUW6ICz4SLcNvDMg=="><link id=prism-light rel=preload href=/prism-themes/prism-gruvbox-light.min.42a221741efe997fcc94187c39d63c555560678789ac9ca856c74a5f0ddb2aa6c50d38b2ffbecc7a99038cbbd2efa99746e862267f781c559e0cfec10b88a5fc.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity="sha512-QqIhdB7+mX/MlBh8OdY8VVVgZ4eJrJyoVsdKXw3bKqbFDTiy/77MepkDjLvS76mXRuhiJn94HFWeDP7BC4il/A==" disabled><noscript><link rel=stylesheet href=/prism-themes/prism-gruvbox-dark.min.54aecc64074623a4f9898544dcbdab9e804f1560ef0b38f4cf8e10fcaaf72264e798cb407c601aca6ecd833ec4eb93d66535581f18d45ba202cf848b70dbc332.css integrity="sha512-VK7MZAdGI6T5iYVE3L2rnoBPFWDvCzj0z44Q/Kr3ImTnmMtAfGAaym7Ngz7E65PWZTVYHxjUW6ICz4SLcNvDMg=="><link rel=stylesheet href="/css/non-critical.979fb31ac332b42b6b26763f7263e452271c9d83fa454c048b951eee7c8c74d628fcd72697b3ac484f455f71c091a1d2db913786fe6c795eafab76cd7cbaba99.css" integrity="sha512-l5+zGsMytCtrJnY/cmPkUiccnYP6RUwEi5Ue7nyMdNYo/Ncml7OsSE9FX3HAkaHS25E3hv5seV6vq3bNfLq6mQ=="></noscript><script>(()=>{function n(){if(localStorage&&localStorage.getItem("theme"))return localStorage.getItem("theme");if(window.matchMedia)return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}function e(e){document.documentElement.setAttribute("data-theme",e);let t=document.getElementById("prism-dark"),n=document.getElementById("prism-light");t.toggleAttribute("disabled",e==="light"),n.toggleAttribute("disabled",e==="dark"),localStorage.setItem("theme",e)}var t=n();t&&e(t);function s(t){let n=t.currentTarget.classList.contains("light--hidden")?"light":"dark";e(n)}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".theme__toggle").forEach(e=>{e.addEventListener("click",s)})})})()</script><link rel=apple-touch-icon sizes=120x120 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><div class=layout><header><a class=logo href=/><div class=logo__text>stephenjayakar.com</div><div class=logo__chevron>></div><div class=logo__cursor>█</div></a><div class=search><input id=search__text type=search placeholder=Search... aria-label=Search autocomplete=off><div id=search__suggestions class=search__suggestions--hidden></div></div><nav id=menu><ul class=menu--horizontal><li class=menu__item><a href=/about>About</a></li></ul><div class=menu__burger><input class=menu__item type=checkbox aria-label="Open main menu"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6h16"/><path d="M4 12h16"/><path d="M4 18h16"/></svg><ul class=menu--vertical><li><a class=menu__item href=/about>About</a></li></ul></div></nav><button class="theme__toggle light--hidden" aria-label="Toggle light mode">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sun"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg>
</button>
<button class="theme__toggle dark--hidden" aria-label="Toggle dark mode"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-moon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg></button></header><main><div class=content><article class=post><div class=post-header><h1>ChatGPT isn&rsquo;t a decompiler&mldr; yet</h1><div class=post-meta><span>2024-12-10</span><div class=post-tags><a class=post-tag href=https://stephenjayakar.github.io/tags/tech>tech</a></div><img src=/images/decomp-cover.png alt=computer width=1024 height=1024></div></div><div class=post-content><p>Previous article: <a href=https://stephenjayakar.com/posts/what-i-have-been-up-to/ class=link--external target=_blank rel=noreferrer>What I&rsquo;m up to</a></p><h1 id=abstract--results>Abstract / Results<a href=#abstract--results class=post-heading__anchor aria-hidden=true>#</a></h1><p>It feels a bit pretentious to open a blog post with an abstract. However, I wanted to communicate up front concisely <em>what</em> I tried to do, and what the open areas of exploration are. Those who are interested can dig more.</p><p><strong>I wanted to make ChatGPT into a magic decompiler for PowerPC assembly to supercharge the Super Smash Bros. Melee (&ldquo;Melee&rdquo;) decompilation project.</strong> I observed over a year ago that ChatGPT was surprisingly good at understanding PowerPC assembly language and generating C code that was logically equivalent. I also saw other papers that were attempting to use LLMs as decompilers.</p><p>Problem statement: given the PowerPC ASM <code>a1</code> of a function <code>f1</code>, use AI to come up with C code that compiles to <code>a2</code> where <code>a2 == a1</code> (note: the C code doesn&rsquo;t have to be the same as the original. There are many C programs that map to the same assembly). This is called <strong>match-based decompilation</strong>, as merely being logically equivalent is not sufficient. Also, in the case where <code>a2</code> isn&rsquo;t a match, iteratively improve on the result.</p><p><code>gpt-4o</code> was able to often generate code that was logically similar. It was also <strong>able to iteratively correct compiler errors</strong> (even for an older dialect of C). However, it was <strong>unable to improve on its results</strong> even when given the assembly diffs in a digestible format. It showed understanding of the assembly diffs, but wasn&rsquo;t able to actualize that into logical changes to the C code that brought it closer to its target. I also briefly investigated fine tuning and didn&rsquo;t get results.</p><p>There are a couple of explorations left to be tried, but before I get into that, some notes about the problem space:</p><ul><li>This isn&rsquo;t a classic RLHF problem. You don&rsquo;t <em>need</em> human feedback at all. Especially with the automated tooling I set up, you can actually automatically &ldquo;score&rdquo; how close the ASM is to the target ASM. So maybe a more classic RL approach would be interesting</li><li>Coming up with C code that compiles to the same ASM isn&rsquo;t actually all that&rsquo;s needed for the decompilation project. This tool wouldn&rsquo;t be powerful enough to wire in struct definitions from other parts of the codebase, or even handle imports. On the other hand, LLMs with retrieval could actually be pretty good at this, and tools here would be much appreciated to the scene</li></ul><h1 id=what-were-trying-to-do>What we&rsquo;re trying to do<a href=#what-were-trying-to-do class=post-heading__anchor aria-hidden=true>#</a></h1><p>So we&rsquo;re trying to write a magic-decompiler for Melee. You might ask, why do game decompilation? And why Melee? Valid questions!</p><h2 id=why-melee>Why Melee?<a href=#why-melee class=post-heading__anchor aria-hidden=true>#</a></h2><p>Simple. The game is dear to my heart even if I don&rsquo;t play it that much anymore, and it&rsquo;s still competitively alive today despite coming out in 2001. Also, people have already written extensive modifications for the game, and this would help both:</p><ul><li>power future modifications</li><li>make it more accessible for new developers to join the fray</li></ul><h2 id=game-decompilation>Game Decompilation?<a href=#game-decompilation class=post-heading__anchor aria-hidden=true>#</a></h2><p>There have been a bunch of successful game decompilation projects in the last couple of years, which were then followed by some really cool modifications to the games. One of my favorite ones is <a href="https://www.youtube.com/watch?v=ChqP2ecA8qE" class=link--external target=_blank rel=noreferrer>adding raytracing to Super Mario 64</a> which adds beautiful accurate shadows, reflections, and <a href=https://en.wikipedia.org/wiki/Global_illumination class=link--external target=_blank rel=noreferrer>global illumination</a>. While I dream about adding raytracing to Melee, that probably wouldn&rsquo;t be a great idea since input latency is almost always the top priority when playing the game, but mods like extensive UI modifications or model swaps are definitely fair game.</p><p>Now, it&rsquo;s going to get more technical. First, some background info!</p><h1 id=background-info>Background info<a href=#background-info class=post-heading__anchor aria-hidden=true>#</a></h1><h3 id=match-based-decompilation>Match-based decompilation<a href=#match-based-decompilation class=post-heading__anchor aria-hidden=true>#</a></h3><p>Game decompilation isn&rsquo;t the same as normal decompilation that security engineers do with Ghidra. What we&rsquo;re trying to do is called <strong>match-based decompilation</strong>.</p><p>Assuming a game is written in the C programming language and we have the game binary (in whatever architecture the console is in. For the <a href=https://en.wikipedia.org/wiki/GameCube class=link--external target=_blank rel=noreferrer>Gamecube, it&rsquo;s PowerPC</a>), we want to attempt to reconstruct C code that is <em>similar</em> to what the game developers wrote themselves.</p><p>Note that I said <em>similar</em> and not <em>identical</em>. Compilation is inherently a lossy process, especially as you turn on optimization flags. Comments are almost always stripped out (so your <code>// help me</code> isn&rsquo;t going to make it to prod 😋). However, there are some ways to slice <em>similar</em>.</p><p>Here are two C programs, \(C_1, C_2\), that are <strong>logically similar</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Program 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (i <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>5</span>) {
</span></span><span style=display:flex><span>        sum <span style=color:#f92672>=</span> sum <span style=color:#f92672>+</span> i;
</span></span><span style=display:flex><span>        i <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sum;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Program 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>sum</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> n <span style=color:#f92672>+</span> <span style=color:#a6e22e>sum</span>(n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>sum</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>These produce drastically different assemblies, \(A_1, A_2\), when we use the compiler & flags for Melee.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-asm data-lang=asm><span style=display:flex><span><span style=color:#75715e># Program 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>00000000</span> <span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>main</span><span style=color:#960050;background-color:#1e0010>&gt;</span>:
</span></span><span style=display:flex><span><span style=color:#a6e22e>li</span>      <span style=color:#66d9ef>r3</span>,<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>blr</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-asm data-lang=asm><span style=display:flex><span><span style=color:#75715e># Program 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>00000000</span> <span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>sum</span><span style=color:#960050;background-color:#1e0010>&gt;</span>:
</span></span><span style=display:flex><span><span style=color:#75715e># impl of int sum(), 33 lines
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>00000088</span> <span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>main</span><span style=color:#960050;background-color:#1e0010>&gt;</span>:
</span></span><span style=display:flex><span><span style=color:#a6e22e>mflr</span>    <span style=color:#66d9ef>r0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>li</span>      <span style=color:#66d9ef>r3</span>,<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>stw</span>     <span style=color:#66d9ef>r0</span>,<span style=color:#ae81ff>4</span>(<span style=color:#66d9ef>r1</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>stwu</span>    <span style=color:#66d9ef>r1</span>,-<span style=color:#ae81ff>8</span>(<span style=color:#66d9ef>r1</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>bl</span>      <span style=color:#ae81ff>98</span> &lt;<span style=color:#66d9ef>main</span>+<span style=color:#ae81ff>0x10</span>&gt;
</span></span><span style=display:flex><span><span style=color:#a6e22e>addi</span>    <span style=color:#66d9ef>r3</span>,<span style=color:#66d9ef>r3</span>,<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>lwz</span>     <span style=color:#66d9ef>r0</span>,<span style=color:#ae81ff>12</span>(<span style=color:#66d9ef>r1</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>addi</span>    <span style=color:#66d9ef>r1</span>,<span style=color:#66d9ef>r1</span>,<span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>mtlr</span>    <span style=color:#66d9ef>r0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>blr</span>
</span></span></code></pre></div><p>The compiler completely inlines the logic for \(C_1\), in that it doesn&rsquo;t even compute the sum - it just directly loads the result, 15, into <code>r3</code>, the return register. You can probably see now how compiling can be lossy - we&rsquo;ve completely lost the logic inside of <code>main()</code>. However, for \(C_2\), it actually generates code for the generic method <code>int sum</code> and also does all of the heavy-lifting to call the function.</p><p>While both C programs would be a valid decompilation in some spaces, \(C_1\) would fail to be a <strong>match decompilation</strong> if the assembly we were trying to match was \(A_2\). Specifically, C code that would yield a match is a subset of all C code that is logically equivalent to the target ASM. We have to go as far as <em>register allocations being identical</em>.</p><p>Here&rsquo;s a more insipid example of programs that are really really similar. Here is a C program that calculates the fibonacci sequence iteratively:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>fibonacci</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> temp;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> i;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (i <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; i <span style=color:#f92672>&lt;=</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        temp <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>        a <span style=color:#f92672>=</span> b;
</span></span><span style=display:flex><span>        b <span style=color:#f92672>=</span> temp;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> b;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I&rsquo;ve compiled this program to assembly, and then loaded it into <code>decomp.me</code>. Now, if we swap the declarations for <code>a</code> and <code>b</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Old
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// New (logically equivalent)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span></code></pre></div><p>we get the following ASM diff (while the registers are the same, the instructions are in a different order):</p><p><img src=/images/decomp-asm-diff.png alt="decomp asm diff" loading=lazy width=902 height=396></p><p>This is pretty rough; that means that variable declaration order matters even if it doesn&rsquo;t affect execution. Also, while these are small errors, there are really strange ways to massage the C code in order to get the compiler to spit out some ASM; you&rsquo;ll notice this especially when it&rsquo;s code that triggers a compiler bug.</p><p>Now you might reasonably ask, why do we want the exact same assembly? Some reasons that are non-exhaustive:</p><ul><li>We want to be able to build the exact ROM of the game. This is the easiest way to verify that the game was completely decompiled, as verifying logical equivalence is non-trivial</li><li>Some existing understanding / mods of the game being decompiled rely on the program being laid out the exact same way. Modifying this extensively will make those (albeit brittle) changes not work anymore</li></ul><h3 id=file-types>File types<a href=#file-types class=post-heading__anchor aria-hidden=true>#</a></h3><ul><li>OBJ: This is the output of a compiler. It contains binary machine code that a computer can execute. This is <em>not</em> the readable ASM that we&rsquo;re dealing with, but the binary encoding of it. Looks like gibberish when opened, with occasional strings like <code>"Hello"</code>
<img src=/images/decomp-obj.png alt=obj loading=lazy width=908 height=904><ul><li>You can see that this file says that it&rsquo;s an ELF in the &ldquo;header&rdquo;, which is the object file type for PowerPC.</li></ul></li><li>ASM: This is a human-readable representation of the machine code. It&rsquo;s a programming language to some extent, but much lower level than C. For PowerPC, you&rsquo;ll see instructions like <code>li r1 3</code>.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-asm data-lang=asm><span style=display:flex><span><span style=color:#a6e22e>.fn</span> <span style=color:#66d9ef>f1</span>, <span style=color:#66d9ef>global</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>stwu</span> <span style=color:#66d9ef>r1</span>, -<span style=color:#ae81ff>0x18</span>(<span style=color:#66d9ef>r1</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>add</span> <span style=color:#66d9ef>r0</span>, <span style=color:#66d9ef>r3</span>, <span style=color:#66d9ef>r4</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>stw</span> <span style=color:#66d9ef>r0</span>, <span style=color:#ae81ff>0x10</span>(<span style=color:#66d9ef>r1</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>addi</span> <span style=color:#66d9ef>r3</span>, <span style=color:#66d9ef>r1</span>, <span style=color:#ae81ff>0x10</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>addi</span> <span style=color:#66d9ef>r1</span>, <span style=color:#66d9ef>r1</span>, <span style=color:#ae81ff>0x18</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>blr</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.endfn</span> <span style=color:#66d9ef>f1</span>
</span></span></code></pre></div><ul><li>C: This is C code, which is the closest to human-readable, and what we&rsquo;re looking for</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span><span style=color:#f92672>*</span> <span style=color:#a6e22e>f1</span>(<span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> z <span style=color:#f92672>=</span> x <span style=color:#f92672>+</span> y;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span>z;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=tools>Tools<a href=#tools class=post-heading__anchor aria-hidden=true>#</a></h3><ul><li><strong>Compiler</strong>: this converts C code to an OBJ. This is often <em>a lossy process</em> and the original C code cannot be recovered once you just have the OBJ file, especially as you turn on optimization flags.</li><li><strong>Decompiler</strong>: this would convert either OBJ or ASM -> C. For this particular project, a perfect decompiler doesn&rsquo;t exist but we&rsquo;re looking for something close.</li><li><strong>Disassembler</strong>: OBJ -> ASM. This takes a compiled object file and spits out a human-readable representation of the ASM. Sometimes, it&rsquo;ll even add nice quality-of-life fixes such as changing register arguments from numbers to names like <code>r1</code> or <code>sp</code>.</li><li><strong>Assembler</strong>: ASM -> OBJ. This converts from an ASM to an OBJ. I needed this specifically because the ASM differ I used, <code>asm-differ</code> actually best worked when comparing two object files (but the whole process takes in an ASM file as input).</li></ul><p><strong>Specific tools to this project</strong>:</p><ul><li><strong><code>decomp.me</code></strong>: This is a batteries-included collaborative <a href=https://decomp.me/ class=link--external target=_blank rel=noreferrer>website</a> where you can interactively & collaboratively decompile video games. It&rsquo;s pretty crazy this exists. You barely have to understand how decompiling works to use this tool effectively; hell, I don&rsquo;t think you even really need to know how to code. A lot of my project was understanding how <code>decomp.me</code> works internally.</li><li><strong><code>m2c</code></strong> (<a href=https://github.com/matt-kempster/m2c class=link--external target=_blank rel=noreferrer>GitHub</a>): This is the default decompiler used for <code>decomp.me</code>. It&rsquo;s a great starting point for when you just have ASM, don&rsquo;t get me wrong, but it:<ul><li>doesn&rsquo;t produce code that compiles</li><li>doesn&rsquo;t really take matching into account</li></ul></li><li><strong><code>mwcc</code></strong>: this is the MetroWerks C compiler. I&rsquo;m specifically using a version that&rsquo;s identical (or close to) the one that the Melee team used, with the same flags as well.</li><li><strong><code>dtk disasm</code></strong> (<a href="https://github.com/encounter/decomp-toolkit?tab=readme-ov-file#elf-disasm" class=link--external target=_blank rel=noreferrer>GitHub</a>): The disassembler I used. This tool is used by the Melee decomp project, and the assembly in the GitHub follows the output format.</li><li><strong><code>powerpc-eabi-as</code></strong>: The assembler I used.</li><li><strong><code>asm-differ</code></strong> (<a href=https://github.com/simonlindholm/asm-differ class=link--external target=_blank rel=noreferrer>GitHub</a>): The ASM differ & scorer that <code>decomp.me</code> uses. Was pretty nontrivial to get working the same way. Both <code>decomp.me</code> and my project had to do some workarounds to call it conveniently.</li></ul><p>I&rsquo;ll be referring to these formats / tools, so feel free to return to this section. I&rsquo;ll also explain how to get some of these later.</p><h1 id=what-did-i-do>What did I do?<a href=#what-did-i-do class=post-heading__anchor aria-hidden=true>#</a></h1><p>When I was in the prototyping phase, I was just giving ChatGPT a copy-and-pasted prompt and an assembly file and plugging in the C it gave me to decomp.me. While the code was impressive and usually a close logical match, the code often didn&rsquo;t compile. <code>mwcc</code> uses a pretty old version of C which didn&rsquo;t have a lot of the features we rely on today (e.g. you have to declare all of your variables at the beginning of a function!!), and I bet that didn&rsquo;t make up a lot of ChatGPT&rsquo;s training set.</p><p><img src=/images/decomp-manual.png alt="decomp manual" loading=lazy width=1387 height=172></p><p>I then had a flashback to having crazy TypeScript errors and ChatGPT figuring out all of them at my last job. When I gave ChatGPT all of the compiler errors I had for a given C program, it was really good at fixing the problems without changing the code too much! It would usually take one or two tries to get it to compile, but when actually checking the match score, it wasn&rsquo;t close to a match.</p><p>I realized that the iterative process that I did to get the code to compile could be something to automate. And not just that, I could apply this loop-improvement cycle for ASM matching. But I was pretty far from this: I was currently just holding a bundle of ASM & C files, and copying and pasting them into <code>decomp.me</code>. Getting the ASM from a given C program was hard for me at that time: I even wrote a script to parse the compilation results from <code>decomp.me</code>&rsquo;s backend 😭 since I couldn&rsquo;t figure out how to go from C -> OBJ -> ASM. In order to automate this whole process, I&rsquo;d have to figure out how to run all of these things locally. Specifically:</p><ul><li>Compiling C code with <code>mwcc</code></li><li>Comparing ASM files & scoring them</li><li>Writing a state machine that loops and either fixes compiler errors or attempts to improve the ASM match</li></ul><p>At this point of time, I hadn&rsquo;t verified if ChatGPT was capable of improving the ASM score. It was too difficult to hold onto all these C files and get them to compile while juggling around a bunch of prompts.</p><h1 id=compiling-locally>Compiling locally<a href=#compiling-locally class=post-heading__anchor aria-hidden=true>#</a></h1><p>The objective here is to be able to take a small C function, <code>f1</code>, and get the resulting ASM, ideally in the same format as the Melee codebase.</p><p>First, we have to start by getting the binaries! It took me a while to figure this out, but the <a href=https://github.com/doldecomp/melee class=link--external target=_blank rel=noreferrer>Melee codebase</a> has a helper tool to download a lot of the common binaries. You can just run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ninja build/binutils
</span></span></code></pre></div><p>This will download a bunch of tools including the assembler we&rsquo;ll be using. You also might just want to run <code>ninja</code> to download the rest of the tools, as we&rsquo;ll also need to download</p><ul><li><code>dtk</code></li><li>the compiler. This ends up being in <code>build/compilers</code></li></ul><p>Once I got these binaries, I realized that some of them (namely, the compiler) are Windows programs. As I am developing on a Mac, it took some tinkering to get the compiler to work using <code>wine</code>. My invocation ended up looking something like this (I got the args from <code>decomp.me</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wine bin/mwcceppc.exe -Cpp_exceptions off -proc gekko -fp hard -fp_contract on -O4,p -enum int -nodefaults -inline auto -c -o temp.o FILENAME
</span></span></code></pre></div><p>Once I had my <code>.o</code> files (OBJ), to get the ASM, you have to run it through a disassembler. I ended up calling that like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>../melee/build/tools/dtk elf disasm outputs/temp.o temp.s
</span></span></code></pre></div><p>So the whole compilation flow looks something like this:</p><ol><li>ChatGPT generates a toy C program</li><li>We run it through the compiler, <code>mwcc</code>, to get an OBJ file</li><li>We then run the OBJ file through a disassembler, <code>dtk disasm</code>, to get an assembly file, <code>.s</code></li></ol><h1 id=comparing-asm-files-and-scoring-them>Comparing ASM files and scoring them<a href=#comparing-asm-files-and-scoring-them class=post-heading__anchor aria-hidden=true>#</a></h1><p>Now that we got ASM output, we want to be able to compare two ASM files. You could do something as simple as <code>diff</code> the two <code>.s</code> files. However, I noticed that <code>decomp.me</code> had a much more sophisticated differ, that also included scoring. I&rsquo;ve shown screenshots earlier, but here&rsquo;s a more complicated example:</p><p><figure><img src=/images/decomp-me-complicated.png alt="decomp me complicated" title="Also, check out the insanity on line 50. There are TWO b 90s. b is just an unconditional jump, which means that line 54 should be unreachable." loading=lazy width=1248 height=1484><figcaption>Also, check out the insanity on line 50. There are TWO <code>b 90</code>s. <code>b</code> is just an unconditional jump, which means that line 54 <strong>should be unreachable</strong>.</figcaption></figure></p><p>There are a lot of nice features here:</p><ul><li>scores. both % match as well as a number that decreases -> 0 as you get closer.</li><li>same as <code>diff</code>: lines missing or additional lines</li><li>register errors, marked with <code>r</code></li><li>not shown, but immediate errors are marked with <code>i</code></li></ul><p>I had already tried giving ChatGPT simple <code>diff</code> outputs to see if it could improve the matches, and didn&rsquo;t succeed, so I hoped that giving it a richer picture of the diff would improve its output.</p><p>I ended up going on a deep dive to see how <code>decomp.me</code> accomplished their rich ASM diff view. After some trudging through the codebase, I found where the magic happens: <a href=https://github.com/decompme/decomp.me/blob/master/backend/coreapp/diff_wrapper.py#L1 class=link--external target=_blank rel=noreferrer>this file</a> wraps a library called <code>asm-differ</code> (<a href=https://github.com/simonlindholm/asm-differ class=link--external target=_blank rel=noreferrer>GitHub</a>).</p><p>At first, I was excited to find out that it was a library already by itself. However, the library isn&rsquo;t super easy to call for a one-off situation: it&rsquo;s meant to be used with a C project. I did go through the pains of configuring it properly to make sure it&rsquo;s output was what I was looking for first. Then, I ended up doing something similar to what <code>decomp.me</code> did - write a wrapper program that calls into internal methods of <code>asm-differ</code> and manufactures a project config in-memory. <a href=https://github.com/stephenjayakar/magic-decomp/blob/main/diff_wrapper.py class=link--external target=_blank rel=noreferrer>Here&rsquo;s</a> where I did that, and <a href=https://github.com/decompme/decomp.me/blob/main/backend/coreapp/diff_wrapper.py#L1 class=link--external target=_blank rel=noreferrer>here&rsquo;s</a> where <code>decomp.me</code> did it. My implementation is a little janky as it definitely expects some files to be in the right places, but more on that later. The ASM diff ends up being almost exactly like the website&rsquo;s, which is a huge win! 🎊</p><h1 id=the-state-machine>The state machine<a href=#the-state-machine class=post-heading__anchor aria-hidden=true>#</a></h1><p>I didn&rsquo;t realize that this was a state machine at first. I went into this portion of the project like &ldquo;I need to call ChatGPT in a loop, and I need to glue all of these tools together.&rdquo; I was just copying and pasting long bash commands and pasting inputs and outputs into ChatGPT, and so testing many examples at scale was just not feasible.</p><p>There are two processes at play here:</p><ol><li>Fix errors: Given a C program that doesn&rsquo;t compile, fix it while keeping the logic the same</li><li>Improve ASM score: Given a C program that <em>does compile</em> but doesn&rsquo;t match, try to improve the matching score.</li></ol><p>When asking ChatGPT for C code, the initial state looked like this:</p><p><img src=/images/decomp-initial-state.png alt=decomp-initial-state loading=lazy width=1523 height=751></p><p>Fixing errors was pretty simple. We just compile the program, get the errors, and then ask ChatGPT to attempt to fix the errors. I initially tried to get ChatGPT to fix the errors by just pasting in the last compile run&rsquo;s errors. <strong>This generally took around 5 passes to get code that compiled.</strong> A simple improvement was to send all of ChatGPT&rsquo;s attempts in a chain from the last success, which then <strong>got it down to 1-2 passes</strong>. Once we get C code that compiles, we transition to (2):</p><p><figure><img src=/images/decomp-fix.png alt=decomp-fix title="Notably, I didn&rsquo;t include all the errors that ever happened. This process anchors off of the last transition from compiler success -> failure, or the initial C code returned from ChatGPT, as I didn&rsquo;t want to blow up the context window. You&rsquo;ll see this as a common theme." loading=lazy width=1407 height=772><figcaption>Notably, I didn&rsquo;t include all the errors that ever happened. This process anchors off of the last transition from compiler success -> failure, or the initial C code returned from ChatGPT, as I didn&rsquo;t want to blow up the context window. You&rsquo;ll see this as a common theme.</figcaption></figure></p><p>The candidate phase is a bit more interesting and actually tests the hypothesis. From a high level, we want to compare the assemblies of the C code we have and the assembly target, get a diff that is easy-to-interpret, and ask ChatGPT to attempt to improve the C code to be a closer match.</p><p>We start with a candidate, \(C_1\):</p><ol><li>We first need to get the ASM after compiling \(C_1\). We compile the program to get an OBJ file, <code>c1.o</code>, and then we run it through <code>dtk disasm</code> to get ASM \(A_1\).</li><li>Then we have to diff \(A_1\) and \(A_T\). We use <code>asm-differ</code> to get both a score & a line-by-line diff. Let&rsquo;s call this \(D_1\).</li><li>Then, given \(C_1\), the score, and \(D_1\) (which contains both \(A_1\) and \(A_T\)), we ask ChatGPT to generate a new candidate that is a closer match.</li></ol><p>We get \(C_2\). Now, if you&rsquo;ve been following along, you can probably tell that this is going to be a loop of some kind:</p><p><figure><img src=/images/decomp-candidate.png alt=decomp-candidate title="There&rsquo;s a subtle difference with the list of candidates. This is a global list instead of local to the state, as we always pass in all of the successful candidates to ChatGPT. The error list resets every time we have a new code example to anchor on." loading=lazy width=1558 height=1263><figcaption>There&rsquo;s a subtle difference with the list of candidates. This is a global list instead of local to the state, as we always pass in all of the successful candidates to ChatGPT. The error list resets every time we have a new code example to anchor on.</figcaption></figure></p><p>Ultimately, the functionality of this program was to improve the ASM score, so I disregarded blowing up the context window for this phase since I hoped having more information would improve the loop&rsquo;s result. Also, the error fixing loop actually terminated pretty quickly, so keeping track of all the \((c_x, e_x)\) pairs was unnecessary.</p><h1 id=testing>Testing<a href=#testing class=post-heading__anchor aria-hidden=true>#</a></h1><p>Now that the improvement loop was finished, it was time to run it! But before that, we need some input datasets.</p><h2 id=training-set>Training set<a href=#training-set class=post-heading__anchor aria-hidden=true>#</a></h2><p>The nice thing about creating a list of inputs and expected outputs is that it doubles as a training set. After doing so many manual tests, I already had an inclination that results wouldn&rsquo;t be good without fine tuning.</p><p>I came up with a small training set for <code>mwcc</code> <a href=https://github.com/stephenjayakar/decomp-0-context-training/tree/main/general class=link--external target=_blank rel=noreferrer>here</a>. The repo is separated into 10 <code>/general</code> examples and 3 <code>/melee</code> examples. You might ask: why make so many general examples if you&rsquo;re trying to decompile Melee?</p><p>The reason why is that even though we have C / ASM pairs in the Melee decompilation codebase, the code is really idiomatic aka it requires a really large set of headers / context to compile a given function. This poses the following issues:</p><ul><li>If we were to paste in all the context required to compile the function, it will easily exceed <code>4o</code>&rsquo;s token length (I did verify this myself)</li><li>Conjecture: Any fine tuning might not generalize to different functions that have unknown structs, so making it more generic would give the model a higher likelihood of generalizing</li></ul><p>General examples were probably good enough. We wanted ChatGPT to learn the <strong>compiler&rsquo;s behavior with a set of flags.</strong> Coming up with general examples was so easy:</p><ol><li>Ask ChatGPT to generate a toy C program <em>with no includes</em>, probably on a problem I&rsquo;m familiar with (e.g. reversing a linked list)</li><li>Get the code to compile. You can even ask ChatGPT to fix the errors</li><li>Disassemble it to get the resulting ASM</li><li>Save it as a C ASM pair</li></ol><p>Coming up with Melee examples was harder. I essentially had to find really small functions, or attempt to rip out all the context from an already-solved portion of the Melee codebase. That means not using any structs, attempting to be closer to the ASM than even the solution, etc. It wasn&rsquo;t a pleasant process and I couldn&rsquo;t figure out how to automate it.</p><h2 id=actually-testing>Actually testing<a href=#actually-testing class=post-heading__anchor aria-hidden=true>#</a></h2><p>I ran most of the general code examples through the whole loop. <strong>The results weren&rsquo;t great</strong>. ChatGPT:</p><ul><li>✅ was able to fix compiler errors</li><li>✅ seemed to understand the ASM diffs and was able to identify issues</li><li>✅ was able to generate C code that logically was pretty similar or identical to the ASM</li><li>❌ was not able to substantially improve the match score.</li></ul><p>I tried this on a bunch of different code examples. Here&rsquo;s a graph of one of the longer runs:</p><p><figure><img src=/images/decomp-graph.png alt=decomp-graph title="This doesn&rsquo;t include the compiler error fix passes. The score generally doesn&rsquo;t improve and kind of fluctuates about its starting point." loading=lazy width=1258 height=806><figcaption>This doesn&rsquo;t include the compiler error fix passes. The score generally doesn&rsquo;t improve and kind of fluctuates about its starting point.</figcaption></figure></p><p>I was able to reproduce a lack of improvement on many different code examples & runs. 20 passes was around where I started running out of context window as the <code>asm-differ</code> output was pretty long.</p><p>So at this point I decided that the hypothesis was false for the out-of-box model. But we&rsquo;re not done!</p><h1 id=fine-tuning>Fine tuning<a href=#fine-tuning class=post-heading__anchor aria-hidden=true>#</a></h1><p>I didn&rsquo;t really go that deep in on fine-tuning. I was mostly curious about the flow for <code>gpt-4o</code> and if this would be a potential magic bullet.</p><p>I already had examples in a Q&amp;A format. The OpenAI docs generally recommended to use <code>4o-mini</code> if your task was already doable with <code>4o</code> and you wanted to do it for cheaper after fine tuning. As I knew that the task <em>wasn&rsquo;t doable with <code>4o</code></em>, I ended up opting for fine-tuning <code>4o</code>.</p><p>The fine tuning UI was broken which was sad (I filed a ticket), but then I just curled their backend to start the fine-tuning job. $21 later, I realized that I didn&rsquo;t have the money to keep doing this LOL. I did get a pretty graph:</p><p><img src=/images/decomp-ft.png alt=decomp-ft loading=lazy width=2048 height=366></p><p>The really low training loss was interesting to me. I spent some time testing the fine-tuned model. My observations:</p><ul><li>The fine-tuned model basically memorized the training examples. Given the <em>exact same prompt</em>, it would spit out C code that had a really low score of like 20, which is an over 99% match.</li><li>However, varying the TEXT in the prompt (not the ASM) would make the match much worse, which sucked</li><li>It didn&rsquo;t generalize outside of the training set. Performance for ASM it hasn&rsquo;t seen before remained at roughly the same thresholds with no improvement after additional passes.</li></ul><p>I was hoping that fine-tuning the model would help it extrapolate to the &ldquo;C that <code>mwcc</code> would compile to a given ASM.&rdquo; It did not do that, and it also didn&rsquo;t even figure out what type of C code would more easily compile with <code>mwcc</code> (e.g. it still required multiple passes to get compilable code) 😥.</p><h1 id=conclusion>Conclusion<a href=#conclusion class=post-heading__anchor aria-hidden=true>#</a></h1><p>I really enjoyed this project as my first serious AI project. If I didn&rsquo;t try it, I would have gone insane: the first time over a year ago I saw ChatGPT spit out C code after looking at some assembly, I was haunted by what could be if AI was actually a magic decompiler. My inner demons were arguing about the ethics of solving this problem, but they got ahead of the actual reality:</p><p><strong>AI isn&rsquo;t a magic decompiler</strong>. But that doesn&rsquo;t need to be the end of the story. On my <a href=https://github.com/stephenjayakar/magic-decomp class=link--external target=_blank rel=noreferrer>GitHub for this project</a>, I&rsquo;ve detailed some alternate explorations that could be really fruitful, but I just ran out of time (or money). The problem statement is still compelling enough to me that I might work on it in the future.</p><p>Thanks for reading! Now I&rsquo;ll probably go look for a job :)</p></div></article></div><div class=sidebar><aside class=bio><div class="jr__item jr-basics__item"><div class=jr-basics__image><img src=https://i.imgur.com/UKjgsTv.png alt="Picture of Stephen Jayakar" width=250 height=250></div><div class=jr-basics__name>Stephen Jayakar</div><div class=jr-basics__label>Software Engineer</div><div class=jr-basics__summary>Software Engineer in San Francisco. Passionate about tech, video games, and writing. Reconciling faith and intellect, exploring the art behind code and systems. Enjoys music, photography, and mixology.</div><div class=jr-basics__location-city>San Francisco</div><hr><div class="jr-basics__profile jr-basics__profile--row"><a href=https://github.com/stephenjayakar target=_blank rel="noreferrer me"><div class=jr-basics__profile-item><div class=jr-basics__profile-icon><svg role="img" viewBox="0 0 24 24"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><a href=https://x.com/stephenjayakar target=_blank rel="noreferrer me"><div class=jr-basics__profile-item><div class=jr-basics__profile-icon><svg role="img" viewBox="0 0 24 24"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932zM17.61 20.644h2.039L6.486 3.24H4.298z"/></svg></div></div></a><a href=https://www.linkedin.com/in/stephenjayakar target=_blank rel="noreferrer me"><div class=jr-basics__profile-item><div class=jr-basics__profile-icon><svg role="img" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg></div></div></a></div></div><hr></aside><aside><div class=tag-cloud><a href=/tags/christianity style=font-size:1.256112520059121rem class=tag-cloud__tag>christianity</a>
<a href=/tags/dating style=font-size:.8rem class=tag-cloud__tag>dating</a>
<a href=/tags/lemma style=font-size:.8rem class=tag-cloud__tag>lemma</a>
<a href=/tags/meta style=font-size:.8rem class=tag-cloud__tag>meta</a>
<a href=/tags/music style=font-size:.8rem class=tag-cloud__tag>music</a>
<a href=/tags/tech style=font-size:1.9762694551589919rem class=tag-cloud__tag>tech</a></div></aside></div></main><footer><div class=copyright></div></footer><script src=/js/main.4437d6e1fb954a2cec4390d809ac3fe916e66a46545dd7d1798506228297646ecf43fdea4008dbaf7535915163aa506edac9d24646d2032e5edd8d523826fa9d.js integrity="sha512-RDfW4fuVSizsQ5DYCaw/6RbmakZUXdfReYUGIoKXZG7PQ/3qQAjbr3U1kVFjqlBu2snSRkbSAy5e3Y1SOCb6nQ=="></script><script src=/js/flexsearch.1ab5b109bf2ed66903ae10907394415caa12f5c0ee66bc80088ba135ec4a751f62e4961d6a7303b562e4db724392da85945b763b8e1858ea3fd05cc36f9b8156.js integrity="sha512-GrWxCb8u1mkDrhCQc5RBXKoS9cDuZryACIuhNexKdR9i5JYdanMDtWLk23JDktqFlFt2O44YWOo/0FzDb5uBVg=="></script></div></body></html>